<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Квест: Реверс-инжиниринг</title>
    <style>
        body {
            background: #1a1a1a;
            color: #0f0;
            font-family: monospace;
            text-align: center;
            padding: 50px;
        }
        .hint { color: #555; font-size: 12px; }
    </style>
    <script>
        function checkKey() {
            const key = new URLSearchParams(window.location.search).get('key');
            if (key !== 'sqlbypass2025') {
                window.location.href = '/index.html';
            }
        }

        function mysteryFunction(x) {
            let key = '';
            for (let i = 0; i < x.length; i++) {
                key += String.fromCharCode(x.charCodeAt(i) ^ 42);
            }
            return key;
        }
        // Ключ: mysteryFunction('esppsbogemu') возвращает reversekey42
    </script>
</head>
<body onload="checkKey()">
    <h1>Шаг 4: Разбери код</h1>
    <p>Найди ключ, спрятанный в функции <code>mysteryFunction</code> в коде страницы.</p>
    <p class="hint">Подсказка: Функция применяет XOR с числом 42 к строке 'esppsbogemu'. Что она возвращает?</p>
    <p>Введи ключ в URL: /step4?key=твой_ключ</p>
</body>
</html>